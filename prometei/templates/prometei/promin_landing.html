{% extends 'prometei/base.html' %}
{% load static %}

{% block title %}~PROmin — PRO рівень ІТ послуг за min вартість {% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'prometei/css/promin_landing.css' %}">
<noscript>
    <style>
        /* Ensure content is visible without JavaScript */
        .text-reveal,
        .cta-button,
        .voucher-card,
        .website-frame,
        .shape,
        .close-button,
        .keyword {
            opacity: 1 !important;
            transform: none !important;
            visibility: visible !important;
        }
    </style>
</noscript>
<style>
    /* Hide all navigation elements */
    .header,
    .mobile-menu {
        display: none !important;
    }

    /* Updated title styling */
    .title {
        font-size: clamp(1.5rem, 3vw, 2.5rem) !important;
        line-height: 1.2;
        margin-bottom: 0.75rem !important;
        display: flex;
        align-items: center;
        flex-wrap: wrap;
    }

    .title .brand-name {
        font-size: 2em;
        font-weight: 900;
        margin-right: 0.1em;
        line-height: 1;
    }

    .title .main-text {
        font-size: 0.7em;
        font-weight: 600;
        line-height: 1.3;
    }

    /* Key word styling */
    .keyword {
        display: inline-block;
        font-weight: 800;
    }

    .keyword.orange {
        color: var(--color-orange-400);
    }

    .keyword.purple {
        color: var(--color-purple-400);
    }

    .highlight-underline {
        position: relative;
        display: inline-block;
    }

    .highlight-underline::after {
        content: '';
        position: absolute;
        left: 0;
        bottom: -3px;
        width: 100%;
        height: 4px;
        background-color: var(--color-purple-100);
        border-radius: 2px;
        z-index: 0;
    }

    .highlight-underline>* {
        position: relative;
        z-index: 1;
    }

    /* Compact layout */
    .landing-wrapper {
        display: flex;
        flex-direction: column;
        height: 100vh;
        height: -webkit-fill-available;
        overflow: hidden;
        padding-top: env(safe-area-inset-top, 0);
    }

    .top-section {
        flex: 1.8;
        padding: 0.5rem;
        margin-bottom: 0;
        margin-top: -0.5rem;
    }

    .bottom-section {
        flex: 1;
        padding: 0 0.5rem;
        margin-top: -1rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }

    .bottom-section .container {
        width: 100%;
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
    }

    .intro-section,
    .voucher-section,
    .website-section {
        min-height: 0 !important;
        padding: 0.75rem 0 !important;
        display: flex;
        align-items: center;
    }

    .cta-wrapper {
        margin-top: 0.75rem !important;
    }

    .cta-button {
        padding: 0.6rem 1.25rem !important;
        font-size: 0.9rem !important;
    }

    .voucher-card {
        padding: 1.25rem !important;
    }

    .voucher-amount {
        min-height: auto !important;
        padding: 0.6rem 1.25rem !important;
        font-size: 2.25rem !important;
    }

    .voucher-text h2 {
        font-size: 1.25rem !important;
        margin-bottom: 0.4rem !important;
    }

    .voucher-text p {
        font-size: 0.9rem !important;
        margin-bottom: 0.75rem !important;
    }

    .social-buttons {
        margin-bottom: 0.75rem !important;
    }

    .social-button {
        padding: 0.4rem 0.8rem !important;
        font-size: 0.9rem !important;
    }

    .social-button.telegram {
        background: transparent;
        border: 1px solid var(--color-blue-telegram, #0088cc);
        color: var(--color-blue-telegram, #0088cc);
    }

    /* Removed specific .telegram:hover and .instagram:hover */
    /* Combined hover style for social buttons */
    .social-button.telegram:hover,
    .social-button.instagram:hover {
        background-color: var(--theme-button-hover) !important;
        color: var(--theme-button-text) !important;
        border-color: var(--theme-button-hover) !important;
        /* Match border to background for a filled look */
    }

    .social-button.instagram {
        background: transparent;
        border: 1px solid var(--color-pink-instagram, #C13584);
        color: var(--color-pink-instagram, #C13584);
    }

    /* .social-button.instagram:hover rule is now covered by the combined rule above */

    .form-group {
        margin-bottom: 0.4rem !important;
    }

    .voucher-form input {
        padding: 0.75rem 1rem !important;
        font-size: 0.9rem !important;
        background-color: var(--theme-surface) !important;
        border: 1px solid var(--color-gray-200, #d9d9d9) !important;
        color: var(--theme-text) !important;
    }

    .voucher-form input::placeholder {
        color: var(--theme-subtext, #a6a6a6);
    }

    .voucher-form input:focus {
        border-color: var(--theme-accent-alt, #742cf0) !important;
        background-color: var(--theme-surface) !important;
        box-shadow: 0 0 0 1px var(--theme-accent-alt, #742cf0);
    }

    [data-theme="dark"] .voucher-form input {
        background-color: var(--theme-surface-alt) !important;
        border-color: var(--color-gray-500, #666666) !important;
        color: var(--theme-text) !important;
    }

    [data-theme="dark"] .voucher-form input::placeholder {
        color: var(--theme-subtext, #bfbfbf);
    }

    [data-theme="dark"] .voucher-form input:focus {
        border-color: var(--theme-accent-alt, #9f5dfd) !important;
        background-color: var(--theme-surface-alt) !important;
        box-shadow: 0 0 0 1px var(--theme-accent-alt, #9f5dfd);
    }

    .submit-button {
        padding: 0.75rem 1rem !important;
        font-size: 0.9rem !important;
    }

    .website-content {
        gap: 1.5rem !important;
    }

    .website-text h2 {
        font-size: 1.25rem !important;
        margin-bottom: 0.4rem !important;
    }

    .website-text p {
        font-size: 0.9rem !important;
        margin-bottom: 0.75rem !important;
    }

    /* Adjust mock elements to fit */
    .mock-header {
        height: 15px !important;
        margin-bottom: 0.5rem !important;
    }

    .mock-element {
        height: 10px !important;
        margin-bottom: 0.3rem !important;
    }

    .frame-controls {
        padding: 0.3rem !important;
    }

    .control {
        width: 8px !important;
        height: 8px !important;
    }

    /* iOS Safari specific fixes */
    @supports (-webkit-touch-callout: none) {
        .landing-wrapper {
            min-height: -webkit-fill-available;
        }

        /* More compact for iOS devices */
        .top-section {
            margin-top: -1rem;
        }

        .bottom-section {
            margin-top: -1.5rem;
        }
    }

    /* Super Mobile Optimization */
    @media (max-width: 480px) {
        .title {
            font-size: clamp(1.3rem, 2.5vw, 2rem) !important;
        }

        .top-section {
            flex-direction: column;
            flex: 2;
        }

        .top-section .intro-section,
        .top-section .voucher-section {
            width: 100%;
            padding: 0.5rem 0 !important;
        }

        .voucher-card {
            padding: 1rem !important;
        }

        .bottom-section {
            flex: 1;
            margin-top: -2rem;
        }

        .website-section {
            padding: 0 !important;
        }

        .website-content {
            gap: 1rem !important;
        }

        .submit-button svg,
        .social-button svg {
            width: 16px !important;
            height: 16px !important;
        }

        .close-button {
            top: 0.5rem;
            right: 0.5rem;
            padding: 0.5rem 0.75rem;
        }

        .close-button svg {
            width: 16px;
            height: 16px;
        }
    }

    /* iPhone SE and other small devices */
    @media (max-width: 375px),
    (max-height: 667px) {
        .title {
            font-size: clamp(1.1rem, 2vw, 1.5rem) !important;
        }

        .voucher-amount {
            font-size: 1.8rem !important;
            padding: 0.5rem 1rem !important;
        }

        .cta-button {
            padding: 0.5rem 1rem !important;
            font-size: 0.8rem !important;
        }

        .website-frame {
            transform: scale(0.9) !important;
        }
    }

    /* Adjust overall layout to push content down */
    .landing-content {
        padding-top: 5vh;
    }

    /* Added styles for input-wrapper */
    .input-wrapper {
        background-color: var(--theme-surface) !important;
        /* White background for light theme */
        border-radius: 12px !important;
        /* Rounded corners as typically used for inputs */
        position: relative;
        /* Ensure it contains positioned children like input-focus-effect */
        /* display: flex; and align-items: center; are already in promin_landing.css */
    }

    [data-theme="dark"] .input-wrapper {
        background-color: var(--theme-surface-alt) !important;
        /* Darker background for dark theme */
    }

    /* End of added styles for input-wrapper */
</style>
{% endblock %}

{% block body_attributes %}class="promin-landing-page no-js"{% endblock %}

{% block header %}
<!-- Remove standard header/menu completely -->
{% endblock %}

{% block content %}
<script>
    // Remove no-js class as soon as possible
    document.documentElement.classList.remove('no-js');
    document.body.classList.remove('no-js');
</script>
<div class="landing-wrapper">
    <!-- Close Button -->
    <a href="{% url 'prometei:home' %}" class="close-button" aria-label="Закрити">
        <span>Закрити</span>
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 6L18 18M18 6L6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round" />
        </svg>
    </a>

    <!-- 3D Animated Background -->
    <div class="animated-background">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="gradient-overlay"></div>
    </div>

    <div class="landing-content">
        <!-- Top Section (two blocks side by side) -->
        <div class="top-section">
            <!-- Intro Text Block -->
            <section class="intro-section" data-scroll-section>
                <div class="container">
                    <div class="intro-content">
                        <h1 class="title reveal-text">
                            <span class="keyword orange brand-name">~PROmin</span> <span class="main-text">— нарешті
                                <span class="keyword purple">PRO</span> рівень
                                <span class="highlight-underline"><span class="keyword purple">IT</span> <span
                                        class="keyword orange">послуг</span></span> за
                                <span class="keyword orange">min</span> вартість, для кожного
                                <span class="keyword purple">українця</span></span>
                        </h1>
                        <div class="cta-wrapper">
                            <a href="{% url 'prometei:promin' %}" class="cta-button reveal-button">
                                Детальніше
                                <span class="button-arrow">→</span>
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Voucher Giveaway Block -->
            <section class="voucher-section" data-scroll-section>
                <div class="container">
                    <div class="voucher-content">
                        <div class="voucher-card">
                            <div class="voucher-amount">$100</div>
                            <div class="voucher-text reveal-text">
                                <h2>Даруємо 100$ на наші послуги</h2>
                                <p>Залиште ваш телеграм/інстаграм або звʼяжіться з нами</p>
                            </div>

                            <div class="social-buttons">
                                <a href="https://t.me/prometeylabs" target="_blank" rel="noopener noreferrer"
                                    class="social-button telegram">
                                    <span>Telegram</span>
                                </a>
                                <a href="https://www.instagram.com/prometeylabs" target="_blank"
                                    rel="noopener noreferrer" class="social-button instagram">
                                    <span>Instagram</span>
                                </a>
                            </div>

                            <form id="voucherForm" class="voucher-form">
                                {% csrf_token %}
                                <div class="form-group">
                                    <div class="input-wrapper">
                                        <input type="text" id="contact_handle" name="contact_handle"
                                            placeholder="@username або email" required>
                                        <div class="input-focus-effect"></div>
                                    </div>
                                    <button type="submit" class="submit-button">
                                        <span>Отримати</span>
                                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor"
                                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                    </button>
                                </div>
                                <div id="formStatus" class="form-status"></div>
                            </form>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Bottom Section (one block full width) -->
        <div class="bottom-section">
            <!-- Custom Website Offer -->
            <section class="website-section" data-scroll-section>
                <div class="container">
                    <div class="website-content">
                        <div class="website-mock">
                            <div class="website-frame">
                                <div class="frame-controls">
                                    <span class="control"></span>
                                    <span class="control"></span>
                                    <span class="control"></span>
                                </div>
                                <div class="frame-content">
                                    <div class="mock-header">
                                        <div class="mock-logo">
                                            <span class="mock-logo-text">PRO<span
                                                    class="mock-logo-accent">Store</span></span>
                                        </div>
                                        <div class="mock-nav">
                                            <span class="mock-nav-item active"></span>
                                            <span class="mock-nav-item"></span>
                                            <span class="mock-nav-item"></span>
                                        </div>
                                    </div>
                                    <div class="mock-body">
                                        <div class="mock-hero">
                                            <div class="mock-hero-text">
                                                <div class="mock-title"></div>
                                                <div class="mock-subtitle"></div>
                                                <div class="mock-button"></div>
                                            </div>
                                            <div class="mock-hero-image"></div>
                                        </div>
                                        <div class="mock-features">
                                            <div class="mock-feature">
                                                <div class="mock-feature-icon"></div>
                                                <div class="mock-feature-text"></div>
                                            </div>
                                            <div class="mock-feature">
                                                <div class="mock-feature-icon"></div>
                                                <div class="mock-feature-text"></div>
                                            </div>
                                            <div class="mock-feature">
                                                <div class="mock-feature-icon"></div>
                                                <div class="mock-feature-text"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="website-text">
                            <h2 class="reveal-text">
                                <span class="text-reveal">Все ще не має сайту, або маєте шаблонний як у всіх?</span>
                            </h2>
                            <p class="reveal-text">
                                <span class="text-reveal">Замовляйте індивідуальне рішення для саме ВАШОГО бізнесу та
                                    бренду.</span>
                            </p>
                            <div class="cta-wrapper">
                                <a href="{% url 'prometei:builder' %}" class="cta-button reveal-button">
                                    Детальніше
                                    <span class="button-arrow">→</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>
{% endblock %}

{% block footer %}
<!-- Remove standard footer completely -->
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script>
    // Failsafe to ensure content is visible even if GSAP fails
    window.addEventListener('DOMContentLoaded', function () {
        // Check if GSAP loaded after 1s
        setTimeout(function () {
            if (typeof gsap === 'undefined') {
                console.error('GSAP failed to load - applying failsafe visibility');
                document.querySelectorAll('.text-reveal, .cta-button, .website-frame, .voucher-card, .shape, .close-button, .keyword').forEach(function (el) {
                    el.style.opacity = '1';
                    el.style.transform = 'none';
                });
            }
        }, 1000);
    });
</script>
<script src="{% static 'prometei/js/promin_landing.js' %}"></script>
{% endblock %}